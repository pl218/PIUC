
{% extends 'base_signed.html' %}

{% block body %}


<div class="signed_container">
 <div id="feed_submit">
    <p> SUBMIT NEW </p>
  </div>
  <div id="feed_submit_form">
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">POST</button>
    </form>
  </div>
  {% for post in posts %}
  <div class="feed_post">

    <div class="post_title">
      <span>
        {{ post.title }}
      </span>
      {% if post in user.userprofile.favorites.all %}
      <a href="{% url 'accounts:favorite' user.get_username post.id %}">
        <div class="fav_on"> </div>
      </a>
      {% else %}
      <a href="{% url 'accounts:favorite' user.get_username post.id %}">
        <div class="fav_off"> </div>
      </a>
      {% endif %}
    </div>

    <div class="post_text">
      <p>
        {{ post.post }}
      </p>
    </div>
    <div class="post_user">
      <p> Posted by <a href="{% url 'accounts:profile' post.user.get_username %}" id="redirect_profile">{{ post.user.get_full_name }}</a> ORCID:{{ post.user.userprofile.ORCID }} {{ post.date }} </p>
    </div>

  </div>
  {% endfor %}
</div>

<script type="text/javascript">
  //PUTS THE UNDER BORDER UNDER THE FEED LINK IN THE NAV BAR
  document.querySelector("#nav_bar_links > li:nth-child(1)").id = "nav_bar_link_selected";
  document.getElementById("feed_submit").addEventListener("click", RevealSubmit);
  
  var checker_submit = true;
  function RevealSubmit() {
  //  console.log(checker_submit);
    if(checker_submit){
      document.getElementById("feed_submit_form").style.display = "inline-block";
      checker_submit = false;
    } else {
      document.getElementById("feed_submit_form").style.display = "none";
      checker_submit = true;
    }
  }
</script>

{% endblock %}
