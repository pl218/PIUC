
{% extends 'base_signed.html' %}

{% block body %}

<div class="signed_container">
{% if user.userprofile.Twitter_SignedIn%}
  <div id="feed_submit">
    <p> POST ON TWEET </p>
  </div>
  <div id="feed_submit_form">
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">POST</button>
    </form>
  </div>
{% else %}
  <div id="feed_submit">
    <a href="{% url 'accounts:TwitterSignIn' user.get_username %}">SIGN IN ON TWITTER TO POST</a>
  </div>
{% endif %}
  {% for post in posts %}
  <div class="feed_post">

    <div class="post_title">
      <span>
        {{ post.title }}
      </span>
      {% if post in user.userprofile.favorites.all %}
      <a href="{% url 'accounts:favorite' user.get_username post.id %}">
        <i class="fa fa-star fav_on"  aria-hidden="true" style = "font-size:17pt; line-height: 24pt; text-align: center"></i>
      </a>
      {% else %}
      <a href="{% url 'accounts:favorite' user.get_username post.id %}">
        <i class="fa fa-star fav_off" aria-hidden="true" style = "font-size:17pt; line-height: 24pt; text-align: center"></i>
      </a>
      {% endif %}
    </div>

    <div class="post_text">
      <p>
        {{ post.post }}
      </p>
    </div>
    <div class="post_user">
      <p> Posted by <a href="{% url 'accounts:profile' post.user.get_username %}" id="redirect_profile">{{ post.user.get_full_name }}</a> ORCID:{{ post.user.userprofile.ORCID }} {{ post.date }} </p>
    </div>

  </div>
  {% endfor %}
  {% if loggedReddit %}
        {% for submissions in RedditPosts %}
          <div class="feed_post_reddit">
          Subreddit Name
          {{ submissions.subreddit}}
          <br>
          TITLE
          {{submissions.title}}
          <br>
          Post
          {{ submissions.selftext}}
          <br>
          Imagem/videos post
          {{submissions.url}}
          <br>
          Link
          www.reddit.com{{ submissions.permalink}}
          <br>
          Author
          {{ submissions.author }}
          <br>
        </div>
        {% endfor %}
  {% else %}
      Login to show reddit posts!!!
  {% endif %}
</div>
<a href="loginReddit">Login Reddit</a>

<script type="text/javascript">
  //PUTS THE UNDER BORDER UNDER THE FEED LINK IN THE NAV BAR
  document.querySelector("#nav_bar_links > li:nth-child(2)").id = "nav_bar_link_selected";

  /////SUBMIT POST
  document.getElementById("feed_submit").addEventListener("click", RevealSubmit);

  var checker_submit = true;
  function RevealSubmit() {
    console.log(checker_submit);
    if(checker_submit){
      document.getElementById("feed_submit_form").style.display = "inline-block";
      checker_submit = false;
    } else {
      document.getElementById("feed_submit_form").style.display = "none";
      checker_submit = true;
    }
  }
</script>

{% endblock %}
