<!DOCTYPE html>

{% load static %}
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="{% static 'css/defaults.css' %}">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  <link rel="stylesheet" href="{% static 'css/responsiveness.css' %}">
  <link href="https://fonts.googleapis.com/css?family=Nunito|Roboto" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <header>
    <div id="nav_bar">
      <a href="{% url 'feed:mainpage' %}"><img id="nav_bar_logo" src="{% static 'logo2.png' %}"></a>
      <div id="nav_bar_profile">
        <img src="{% static 'profile_icon_black.png' %}">
        <div id="nv_profile_card">
          <a href="{% url 'accounts:profile' user.get_username %}"><img id="nv_profile_pic" src="{{user.userprofile.profilePic.url}}"></a>
          <p>{{ user.first_name }}  {{ user.last_name }} </p>
          <p> {{ user }} </p>
          <ul>
            <li class="nv_profile_links"><a href="{% url 'accounts:profile' user.get_username %}">View Profile</a></li>
            <li class="nv_profile_links"><a href="{% url 'accounts:edit_profile' user.get_username %}">Edit Profile</a></li>
            <li class="nv_profile_links"><a href="{% url 'accounts:help' %}">Need Help?</a></li>
            <li class="nv_profile_links"><a href="{% url 'accounts:TwitterSignIn' user.get_username %}">Log in with Twitter</a></li>
            <li class="nv_profile_links"><a href="{% url 'accounts:User_logout' %}" onclick="return confirm('Are you sure you want to Logout?')">Logout</a></li>
          </ul>
        </div>
      </div>

        <div id="nav_bar_search">
          <img src="{% static 'search_icon_black.png' %}">
        </div>

        <img src="{% static 'search_arrow.png' %}" id="nv_search_submit">
        <input id="nv_search_input"  type="text" placeholder="Search.." value="">
        <div id="hamburger">
          <div id="bar1"></div>
          <div id="bar2"></div>
          <div id="bar3"></div>
        </div>

        <div id="nav_search_card">
                <ul id="nav_bar_links">
                  <li id="pilas"> <input id="nv_search_input1"  type="text" placeholder="Search.." value=""></li>
                  <li onclick="location.href='{% url 'feed:mainpage' %}';">feed live</li>
                  <li onclick="location.href='{% url 'feed:favorites' user.get_username %}';">feed favorites</li>
                  <li onclick="location.href='{% url 'accounts:bookmarks' user.get_username %}';">bookmarks</li>
                </ul>
        </div>
    </div>
    <div id="background"></div>
  </header>
  {% block body %}
  BASE
  {% endblock %}
<script type="text/javascript">
  document.getElementById("nv_search_submit").addEventListener("click", search_go);
  function search_go() {
    var input = document.getElementById("nv_search_input").value;
    if(input.charAt(0)=='#')
    window.location.href = "../../accounts/search_tweets/" + input.substring(1);
    else
    window.location.href = "../../accounts/search/" + input;
  }

  document.getElementById("nav_bar_profile").addEventListener("click", RevealProfile);
  document.getElementById("hamburger").addEventListener("click", RevealSearchCard);
  document.getElementById("background").addEventListener("click", RevealSearchCard);

  document.getElementById("nav_bar_search").addEventListener("click", RevealSearchBar);
  document.querySelector("#nav_bar_profile > img").addEventListener("mouseover", changeProfileLogo);
  document.querySelector("#nav_bar_profile > img").addEventListener("mouseleave", changeProfileLogo);
  document.querySelector("#nav_bar_profile > img").addEventListener("click", changeProfileLogo);
  document.querySelector("#nav_bar_search > img").addEventListener("mouseover", changeSearchLogo);
  document.querySelector("#nav_bar_search > img").addEventListener("mouseleave", changeSearchLogo);
  document.querySelector("#nav_bar_search > img").addEventListener("click", changeSearchLogo);
  document.querySelector("#nv_search_submit").addEventListener("mouseover", changeSearchArrow);
  document.querySelector("#nv_search_submit").addEventListener("mouseleave", changeSearchArrow);


  var checker = true;
  var checker_s_c = true;
  var checker_s = true;
  var checker_c_s = true;
  var checker_c_p = true;
  var checker_s_a = true;


  function RevealProfile() {
    if(checker){
      document.getElementById("nv_profile_card").style.pointerEvents = "all";
      document.getElementById("nv_profile_card").style.top = "154px";
      document.getElementById("nv_profile_card").style.opacity = "1";
      checker = false;
    } else {
      document.getElementById("nv_profile_card").style.top = "0";
      document.getElementById("nv_profile_card").style.opacity = "0";
      document.getElementById("nv_profile_card").style.pointerEvents = "none";
      checker = true;
    }
  }

  function RevealSearchCard() {
    if(checker_s_c){
      document.getElementById("nav_search_card").style.pointerEvents = "all";
      document.getElementById("nav_search_card").style.left = "0";
      document.getElementById("nav_search_card").style.opacity = "1";
      document.getElementById('bar1').style.marginLeft ="10px";
      document.getElementById('bar2').style.marginLeft ="0px";
      document.getElementById('bar3').style.marginLeft ="10px";
      document.getElementById("background").style.backgroundColor = "black";
      document.getElementById("background").style.display = "inline";
      document.getElementById("background").style.zIndex = "1";
      checker_s_c = false;
    } else {
      document.getElementById("nav_search_card").style.left = "-100px";
      document.getElementById("nav_search_card").style.opacity = "0";
      document.getElementById("nav_search_card").style.pointerEvents = "none";
      document.getElementById('bar1').style.marginLeft ="0px";
      document.getElementById('bar2').style.marginLeft ="10px";
      document.getElementById('bar3').style.marginLeft ="0px";
      document.getElementById("background").style.zIndex = "-100000";
      document.getElementById("background").style.display = "none";
      checker_s_c = true;
    }
  }

  function RevealSearchBar() {
    if(checker_s){
      document.getElementById("nv_search_input").style.width = "130px";
      document.getElementById("nv_search_input").style.opacity = "1";
      document.getElementById("nv_search_submit").style.width = "18pt";
      document.getElementById("nv_search_submit").style.opacity = "1";
      checker_s = false;
    } else {
      document.getElementById("nv_search_input").style.width = "0px";
      document.getElementById("nv_search_input").style.opacity = "0";
      document.getElementById("nv_search_submit").style.width = "0px";
      document.getElementById("nv_search_submit").style.opacity = "0";
      checker_s = true;
    }
  }
  function changeProfileLogo() {
    if(checker_c_s){
      document.querySelector("#nav_bar_profile > img").src="{% static 'profile_icon.png' %}";
      checker_c_s = false;
    } else {
      document.querySelector("#nav_bar_profile > img").src="{% static 'profile_icon_black.png' %}";
      checker_c_s = true;
    }
  }
  function changeSearchLogo() {
    if(checker_c_p){
      document.querySelector("#nav_bar_search > img").src="{% static 'search_icon.png' %}";
      checker_c_p = false;
    } else {
      document.querySelector("#nav_bar_search > img").src="{% static 'search_icon_black.png' %}";
      checker_c_p = true;
    }
  }

  function changeSearchArrow() {
    if(checker_s_a){
      document.querySelector("#nv_search_submit").src="{% static 'search_arrow_hover.png' %}";

      checker_s_a = false;
    } else {
      document.querySelector("#nv_search_submit").src="{% static 'search_arrow.png' %}";
      checker_s_a = true;
    }
  }
  function myFunction(x) {
    if (!x.matches) { // If media query matches
        document.getElementById("nav_search_card").style.opacity = "1";
        document.querySelector("#nav_bar_profile > img").src="{% static 'profile_icon_black.png' %}";
    } else {
      document.getElementById("nav_search_card").style.opacity = "0";
      document.querySelector("#nav_bar_profile > img").src="{% static 'profile_icon.png' %}";
    }
}

var x = window.matchMedia("(max-width: 700px)")
myFunction(x) // Call listener function at run time
x.addListener(myFunction)
</script>
</body>

</html>
